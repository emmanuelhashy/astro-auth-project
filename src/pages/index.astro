---
import { actions } from "astro:actions";
import MainLayout from "@/layouts/MainLayout.astro";
import { ProductList } from "@/components";

const searchParams = Astro.url.searchParams;

const { data, error } = await actions.getProducts();

if (error) {
  return Astro.redirect("/");
}

const { products } = data;
---

<MainLayout>
  <h1 class="text-3xl text-center my-4">Luxury Cars</h1>
  <ProductList products={products} client:idle />
</MainLayout>
